HERE := $(dir $(realpath $(lastword $(MAKEFILE_LIST))))
COMPOSE_RUN := docker compose run --rm maker

DEPS := ./.deps

# clean-downloads: ##
# 	# rm -rf $(HERE).downloads

# build: ## produces ready-to-burn bootable USB img
# 	# @$(HERE)10_loop_usb.sh

clean: clearDebris clearDocker ## remove all evidence of ever having run

clearDocker: ## delete worker image
	@docker compose down --remove-orphans --rmi local

clearDebris: ## delete intermediate files/folders
	@$(COMPOSE_RUN) rm -rf $(DEPS)

deps: ## download deps
	@$(COMPOSE_RUN) ./maker/scripts/deps.sh "$(DEPS)"

help: ## display this help information
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = ":.*?## "}; {printf "\033[36m%-30s\033[0m %s\n", $$1, $$2}'
